# NWeek_LeeJaeJun.md

## Title: [1Week] 이재준

### 미션 요구사항 분석 & 체크리스트
- [x] 한명의 인스타회원이 다른 인스타회원에게 중복으로 호감표시를 할 수 없습니다.

- [x] 한명의 인스타회원이 11명 이상의 호감상대를 등록 할 수 없습니다.

- [x] 기존의 사유와 다른 사유로 호감을 표시하는 경우에는 성공으로 처리한다. (수정)

  - [x] 네이버 로그인
    - member 테이블의 username 에 개인의 이름과 성별등과 같은정보는 포함되지 않아야 한다.

### 1주차 미션 요약
- likeablePerson 등록 유효성 검사 (아이디 중복, 매력 포인트 중복) -> 실패
- likeablePerson 등록 유효성 검사 (아이디 중복, 매력 포인트 다름) -> 수정
- likeablePerson 최대 10명으로 설정
- 네이버 로그인 구현

---

**[접근 방법]**

LikeablePerson 추가 할때 인스타 아이디 중복시 유효성 검사
1. 로그인 되어 있는 유저의 인스타 정보와 호감 상대로 등록하기 위해 적은 인스타 정보를 통해 
LikeablePerson을 검색해서 값이 있는지 확인한다.(JpaRepository And 검색 이용)
2. 값이 있고, 해당 LikeablePerson의 매력 포인트도 같으면 historyBack을 통해 예외처리 한다.
3. 매력 포인트가 다르면 값을 바꿔주고 JpaRepository를 이용해서 수정처리 한다.
---
호감상대 최대 10명까지만 등록 가능하도록 수정
1. 로그인 되어 있는 유저의 인스타 아이디를 통해 fromLikeablePeople을 불러온다.
2. 불러온 fromLikeablePeople의 사이즈를 검사해서 10명이면 등록이 불가능 하도록 조건을 걸어준다.
---
네이버 로그인
1. 네이버 로그인 api 받아오고 yml 등록
2. 로그인시 회원 등록해주는 CustomerOAuth2UserService 에서 로직 변경

**[특이사항]**
테스트 케이스를 만들어서 10명 이상일때 더이상 호감상대를 추가하지 못하는 예외를 테스트해보려고 했다.
우선 10명의 호감 대상을 등록해서 정말 10명이 등록되었는지 확인하기 위해 Assertions.assertEquals로
List<LikeablePerson>의 size 와 10을 비교했는데 자꾸 9, 10으로 실패한다.
디버깅 돌려보면 분명 size = 10 인데 왜 이렇게 되는지 도저히 모르겠다.


